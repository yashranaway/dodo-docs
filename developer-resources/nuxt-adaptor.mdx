---
title: "Nuxt Adaptor"
description: "Integrate Dodo Payments with your Nuxt project using the official Nuxt module. Covers checkout, customer portal, webhooks, and secure environment setup."
icon: "code-merge"
---

<CardGroup cols={2}>
<Card title="Checkout API Route" icon="cart-shopping" href="#checkout-api-route">
    Integrate Dodo Payments checkout into your Nuxt app using a server route.
</Card>
<Card title="Customer Portal API Route" icon="user" href="#customer-portal-api-route">
    Allow customers to manage subscriptions and details via a Nuxt server route.
</Card>
<Card title="Webhooks API Route" icon="bell" href="#webhook-api-route">
    Receive and process Dodo Payments webhook events securely in Nuxt.
</Card>
</CardGroup>

## Overview

<Info>
This guide explains how to integrate Dodo Payments into your Nuxt application using the official Nuxt module. You'll learn how to set up checkout, customer portal, and webhook API routes, and how to securely manage environment variables.
</Info>

## Installation

<Steps>
<Step title="Install the Nuxt module">
Run the following command in your project root:

```bash
npm install @dodopayments/nuxt
```
</Step>
<Step title="Register the module in nuxt.config.ts">
Add <code>@dodopayments/nuxt</code> to your <code>modules</code> array and configure it:

```typescript nuxt.config.ts expandable
export default defineNuxtConfig({
  modules: ["@dodopayments/nuxt"],
  devtools: { enabled: true },
  compatibilityDate: "2025-02-25",
  runtimeConfig: {
    private: {
      bearerToken: process.env.NUXT_PRIVATE_BEARER_TOKEN,
      webhookKey: process.env.NUXT_PRIVATE_WEBHOOK_KEY,
      environment: process.env.NUXT_PRIVATE_ENVIRONMENT,
      returnUrl: process.env.NUXT_PRIVATE_RETURNURL
    },
  }
});
```
</Step>
</Steps>

<Warning>
Never commit your <code>.env</code> file or secrets to version control.
</Warning>

## API Route Handler Examples

<Info>
All Dodo Payments integrations in Nuxt are handled via server routes in the <code>server/routes/api/</code> directory.
</Info>

<Tabs>
<Tab title="Checkout API Route">
<Info>
Use this handler to integrate Dodo Payments checkout into your Nuxt app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
</Info>
<CodeGroup>
```typescript server/routes/api/checkout.get.ts expandable

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment, returnUrl },
  } = useRuntimeConfig();

  const handler = checkoutHandler({
    bearerToken: bearerToken,
    environment: environment,
    returnUrl: returnUrl,
  });

  return handler(event);
});
```
</CodeGroup>

<CodeGroup>
```typescript server/routes/api/checkout.post.ts expandable

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment, returnUrl },
  } = useRuntimeConfig();

  const handler = checkoutHandler({
    bearerToken: bearerToken,
    environment: environment,
    returnUrl: returnUrl,
    type: "dynamic"
  });

  return handler(event);
});
```
</CodeGroup>

<CodeGroup>
```typescript server/routes/api/checkout.post.ts (Checkout Sessions) expandable

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment, returnUrl },
  } = useRuntimeConfig();

  const handler = checkoutHandler({
    bearerToken: bearerToken,
    environment: environment,
    returnUrl: returnUrl,
    type: "session"
  });

  return handler(event);
});
```
</CodeGroup>

<Warning>
If <code>productId</code> is missing or invalid, the handler returns a 400 response.
</Warning>

<CodeGroup>
  ```curl Static Checkout Curl example expandable
  curl --request GET \
  --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
  --header 'User-Agent: insomnia/11.2.0' \
  --cookie mode=test
  ```
  </CodeGroup>
  <CodeGroup>
  ```curl Dynamic Checkout Curl example expandable
  curl --request POST \
  --url https://example.com/api/checkout \
  --header 'Content-Type: application/json' \
  --header 'User-Agent: insomnia/11.2.0' \
  --cookie mode=test \
  --data '{
  "billing": {
    "city": "Texas",
    "country": "US",
    "state": "Texas",
    "street": "56, hhh",
    "zipcode": "560000"
  },
  "customer": {
    "email": "test@example.com",
		"name": "test"
  },
  "metadata": {},
  "payment_link": true,
	"product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
	"quantity": 1,
	"billing_currency": "USD",
	"discount_code": "IKHZ23M9GQ",
    "return_url": "https://example.com",
	"trial_period_days": 10
}'
  ```
</CodeGroup>
  <CodeGroup>
  ```curl Checkout Session Curl example expandable
  curl --request POST \
  --url https://example.com/api/checkout \
  --header 'Content-Type: application/json' \
  --header 'User-Agent: insomnia/11.2.0' \
  --cookie mode=test \
  --data '{
  "product_cart": [
    {
      "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
      "quantity": 1
    }
  ],
  "customer": {
    "email": "test@example.com",
    "name": "test"
  },
  "return_url": "https://example.com/success"
}'
  ```
</CodeGroup>

</Tab>


<Tab title="Customer Portal API Route">
<Info>
Create a GET route to allow customers to access their portal. Accepts <code>customer_id</code> as a query parameter.
</Info>
<CodeGroup>
```typescript server/routes/api/customer-portal.get.ts expandable

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment },
  } = useRuntimeConfig();

  const handler = customerPortalHandler({
    bearerToken,
    environment: environment,
  });

  return handler(event);
});
```
</CodeGroup>

**Query Parameters:**
- <code>customer_id</code> (required): The customer ID for the portal session (e.g., <code>?customer_id=cus_123</code>)
- <code>send_email</code> (optional, boolean): If <code>true</code>, sends an email to the customer with the portal link.

<Warning>
Returns 400 if <code>customer_id</code> is missing.
</Warning>

<CodeGroup>
  ```curl Customer Portal Curl example expandable
  curl --request GET \
  --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
  --header 'User-Agent: insomnia/11.2.0' \
  --cookie mode=test
  ```
  </CodeGroup>

</Tab>

<Tab title="Webhook API Route">
<Info>
Create a POST route to securely receive and process webhook events from Dodo Payments.
</Info>
<CodeGroup>
```typescript server/routes/api/webhook.post.ts expandable

export default defineEventHandler((event) => {
  const {
    private: { webhookKey },
  } = useRuntimeConfig();

  const handler = Webhooks({
    webhookKey: webhookKey,
    onPayload: async (payload: any) => {
      // Handle webhook payload here
    },
    // ...add other event handlers as needed
  });

  return handler(event);
});
```
</CodeGroup>

</Tab>
</Tabs>

## Checkout Route Handler

<Info>
Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

- **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
- **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
- **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
<Accordion title="Static Checkout (GET)">

### Supported Query Parameters
<ParamField query="productId" type="string" required>
Product identifier (e.g., <code>?productId=pdt_nZuwz45WAs64n3l07zpQR</code>).
</ParamField>
<ParamField query="quantity" type="integer">
Quantity of the product.
</ParamField>
<ParamField query="fullName" type="string">
Customer's full name.
</ParamField>
<ParamField query="firstName" type="string">
Customer's first name.
</ParamField>
<ParamField query="lastName" type="string">
Customer's last name.
</ParamField>
<ParamField query="email" type="string">
Customer's email address.
</ParamField>
<ParamField query="country" type="string">
Customer's country.
</ParamField>
<ParamField query="addressLine" type="string">
Customer's address line.
</ParamField>
<ParamField query="city" type="string">
Customer's city.
</ParamField>
<ParamField query="state" type="string">
Customer's state/province.
</ParamField>
<ParamField query="zipCode" type="string">
Customer's zip/postal code.
</ParamField>
<ParamField query="disableFullName" type="boolean">
Disable full name field.
</ParamField>
<ParamField query="disableFirstName" type="boolean">
Disable first name field.
</ParamField>
<ParamField query="disableLastName" type="boolean">
Disable last name field.
</ParamField>
<ParamField query="disableEmail" type="boolean">
Disable email field.
</ParamField>
<ParamField query="disableCountry" type="boolean">
Disable country field.
</ParamField>
<ParamField query="disableAddressLine" type="boolean">
Disable address line field.
</ParamField>
<ParamField query="disableCity" type="boolean">
Disable city field.
</ParamField>
<ParamField query="disableState" type="boolean">
Disable state field.
</ParamField>
<ParamField query="disableZipCode" type="boolean">
Disable zip code field.
</ParamField>
<ParamField query="paymentCurrency" type="string">
Specify the payment currency (e.g., <code>USD</code>).
</ParamField>
<ParamField query="showCurrencySelector" type="boolean">
Show currency selector.
</ParamField>
<ParamField query="paymentAmount" type="integer">
Specify the payment amount (e.g., <code>1000</code> for $10.00).
</ParamField>
<ParamField query="showDiscounts" type="boolean">
Show discount fields.
</ParamField>
<ParamField query="metadata_*" type="string">
Any query parameter starting with <code>metadata_</code> will be passed as metadata.
</ParamField>

<Warning>
If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
</Warning>

### Response Format
Static checkout returns a JSON response with the checkout URL:
```json
{
  "checkout_url": "https://checkout.dodopayments.com/..."
}
```
</Accordion>
<Accordion title="Dynamic Checkout (POST)">
- Send parameters as a JSON body in a POST request.
- Supports both one-time and recurring payments.
- For a complete list of supported POST body fields, refer to:
  - [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
  - [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

### Response Format
Dynamic checkout returns a JSON response with the checkout URL:
```json
{
  "checkout_url": "https://checkout.dodopayments.com/..."
}
```
</Accordion>
<Accordion title="Checkout Sessions (POST)">
Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

### Response Format
Checkout sessions return a JSON response with the checkout URL:
```json
{
  "checkout_url": "https://checkout.dodopayments.com/session/..."
}
```
</Accordion>
</AccordionGroup>


## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Nuxt application.

### Query Parameters
<ParamField query="customer_id" type="string" required>
The customer ID for the portal session (e.g., <code>?customer_id=cus_123</code>).
</ParamField>
<ParamField query="send_email" type="boolean">
If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
Returns 400 if <code>customer_id</code> is missing.
</Warning>

## Webhook Route Handler


- **Method:** Only POST requests are supported. Other methods return 405.
- **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
- **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
- **Error Handling:**
  - 401: Invalid signature
  - 400: Invalid payload
  - 500: Internal error during verification
- **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers
<CodeGroup>
```typescript Typescript expandable
onPayload?: (payload: WebhookPayload) => Promise<void>;
onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
```
</CodeGroup>

---

## Prompt for LLM

```
You are an expert Nuxt developer assistant. Your task is to guide a user through integrating the @dodopayments/nuxt module into their existing Nuxt project.

The @dodopayments/nuxt module provides API route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed for Nuxt 3 server routes.

First, install the necessary package:

npm install @dodopayments/nuxt

Second, add the configuration to nuxt.config.ts

export default defineNuxtConfig({
  modules: ["@dodopayments/nuxt"],
  devtools: { enabled: true },
  compatibilityDate: "2025-02-25",
  runtimeConfig: {
    private: {
      bearerToken: process.env.NUXT_PRIVATE_BEARER_TOKEN,
      webhookKey: process.env.NUXT_PRIVATE_BEARER_TOKEN,
      environment: process.env.NUXT_PRIVATE_ENVIRONMENT,
      returnUrl: process.env.NUXT_PRIVATE_RETURNURL
    },
  }
});


Here's how you should structure your response:

    Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/nuxt module would you like to integrate into your project? You can choose one or more of the following:

    Checkout API Route (for handling product checkouts)
    Customer Portal API Route (for managing customer subscriptions/details)
    Webhook API Route (for receiving Dodo Payments webhook events)
    All (integrate all three)"

    Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout API Route is selected:

Purpose: This route redirects users to the Dodo Payments checkout page.
File Creation: Create a new file at server/routes/api/checkout.get.ts in your Nuxt project.

Code Snippet:

// server/routes/api/checkout.get.ts

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment, returnUrl },
  } = useRuntimeConfig();

  const handler = checkoutHandler({
    bearerToken: bearerToken,
    environment: environment,
    returnUrl: returnUrl,
  });

  return handler(event);
});

Configuration & Usage:
- bearerToken: Your Dodo Payments API key. Set via the NUXT_PRIVATE_BEARER_TOKEN environment variable.
- returnUrl: (Optional) The URL to redirect the user to after a successful checkout.
- environment: (Optional) Set to your environment (e.g., "test_mode" or "live_mode").

Static Checkout (GET) Query Parameters:
- productId (required): Product identifier (e.g., ?productId=pdt_nZuwz45WAs64n3l07zpQR)
- quantity (optional): Quantity of the product
- Customer Fields (optional): fullName, firstName, lastName, email, country, addressLine, city, state, zipCode
- Disable Flags (optional, set to true to disable): disableFullName, disableFirstName, disableLastName, disableEmail, disableCountry, disableAddressLine, disableCity, disableState, disableZipCode
- Advanced Controls (optional): paymentCurrency, showCurrencySelector, paymentAmount, showDiscounts
- Metadata (optional): Any query parameter starting with metadata_ (e.g., ?metadata_userId=abc123)

Dynamic Checkout (POST): Parameters are sent as a JSON body. Supports both one-time and recurring payments. For a complete list of supported POST body fields, refer to:
- Docs - One Time Payment Product: https://docs.dodopayments.com/api-reference/payments/post-payments
- Docs - Subscription Product: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions

Checkout Sessions (POST) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

Error Handling: If productId is missing or other query parameters are invalid, the handler will return a 400 response.

If Customer Portal API Route is selected:

Purpose: This route allows customers to access their Dodo Payments customer portal.
File Creation: Create a new file at server/routes/api/customer-portal.get.ts in your Nuxt project.

Code Snippet:

// server/routes/api/customer-portal.get.ts

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment },
  } = useRuntimeConfig();

  const handler = customerPortalHandler({
    bearerToken,
    environment: environment,
  });

  return handler(event);
});

Query Parameters:
- customer_id (required): The customer ID for the portal session (e.g., ?customer_id=cus_123)
- send_email (optional, boolean): If set to true, sends an email to the customer with the portal link.
- Returns 400 if customer_id is missing.

If Webhook API Route is selected:

Purpose: This route processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments, refunds, or subscription changes.
File Creation: Create a new file at server/routes/api/webhook.post.ts in your Nuxt project.

Code Snippet:

// server/routes/api/webhook.post.ts

export default defineEventHandler((event) => {
  const {
    private: { webhookKey },
  } = useRuntimeConfig();

  const handler = Webhooks({
    webhookKey: webhookKey,
    onPayload: async (payload) => {
      // handle the payload
    },
    // ... other event handlers for granular control
  });

  return handler(event);
});

Handler Details:
- Method: Only POST requests are supported. Other methods return 405.
- Signature Verification: The handler verifies the webhook signature using webhookKey and returns 401 if verification fails.
- Payload Validation: The payload is validated with Zod. Returns 400 for invalid payloads.

Error Handling:
- 401: Invalid signature
- 400: Invalid payload
- 500: Internal error during verification

Event Routing: Calls the appropriate event handler based on the payload type. Supported event handlers include:
- onPayload?: (payload: WebhookPayload) => Promise<void>
- onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>
- onPaymentFailed?: (payload: WebhookPayload) => Promise<void>
- onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>
- onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>
- onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>
- onRefundFailed?: (payload: WebhookPayload) => Promise<void>
- onDisputeOpened?: (payload: WebhookPayload) => Promise<void>
- onDisputeExpired?: (payload: WebhookPayload) => Promise<void>
- onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>
- onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>
- onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>
- onDisputeWon?: (payload: WebhookPayload) => Promise<void>
- onDisputeLost?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>
- onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>

Environment Variable Setup:
To ensure the module functions correctly, set up the following environment variables in your Nuxt project's deployment environment (e.g., Vercel, Netlify, AWS, etc.):
- NUXT_PRIVATE_BEARER_TOKEN: Your Dodo Payments API Key (required for Checkout and Customer Portal).
- NUXT_PRIVATE_WEBHOOK_KEY: Your Dodo Payments Webhook Secret (required for Webhook handler).
- NUXT_PRIVATE_ENVIRONMENT: (Optional) Set to your environment (e.g., "test_mode" or "live_mode").
- NUXT_PRIVATE_RETURNURL: (Optional) The URL to redirect to after a successful checkout (for Checkout handler).

Usage in your code:
bearerToken: useRuntimeConfig().private.bearerToken
webhookKey: useRuntimeConfig().private.webhookKey

Important: Never commit sensitive environment variables directly into your version control. Use environment variables for all sensitive information.

If the user needs assistance setting up environment variables for their specific deployment environment, ask them what platform they are using (e.g., Vercel, Netlify, AWS, etc.), and provide guidance.
```